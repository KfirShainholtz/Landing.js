<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <meta name="mobile-web-app-capable" content="yes">
  <title>guess</title>
</head>
<style>

@font-face {
    font-family: 'WRoya';
    src: url('font/WebRoya.eot');
    src: url('font/WebRoya.eot?#iefix') format('embedded-opentype'),
         url('font/WebRoya.woff') format('woff'),
         url('font/WebRoya.ttf') format('truetype'),
         url('font/WebRoya.svg#WebRoya') format('svg');
    font-weight: normal;
    font-style: normal;
    unicode-range: U+0600â€“06FF;
}

html {
    min-height: 100%;
}
body {
  direction:rtl;
  font-family: 'WRoya','Tahoma',tahoma ;
    font-size:1em;
    line-height:2ex;
    color: #333;
    background-repeat:no-repeat !important;
    background-attachment: fixed;
    background: #f1f1f1;
    background: -moz-linear-gradient(top, #dbdbdb 0%, #f1f1f1 50%, #c6c6c6 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #dbdbdb), color-stop(50%, #f1f1f1), color-stop(100%, #c6c6c6));
    background: -webkit-linear-gradient(top, #dbdbdb 0%, #f1f1f1 50%, #c6c6c6 100%);
    min-height: 100%;
}
h1 {
    font-size:2em;
    margin-top:-15px;
    font-weight:bold;
}
form, #container {
    max-width: 300px;
    margin: 0 auto;
    text-align:center;
}
#container {
    padding: 5% 0;
}
#message_txt {
    line-height: 3ex;
    margin: 0 0 2.5ex 0;
}
input[type=text] {
    border: 2px solid #333;
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    outline: none;
    background: #fff;
    color:#000;
    width: 270px;
    height: 50px;
    font-family:"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    text-align:center;
    font-size: 2em;
    margin: 30px 0 30px 0;
}
button {
    border: 2px solid #333;
    border-radius: 50%;
    -moz-border-radius: 50%;
    -webkit-border-radius: 50%;
    background: #ccc;
    margin: 0 10px;
    font-size: 2em;
    text-align:center;
    width: 50px;
    height: 50px;
    cursor: pointer;
    color: #333;
}
button[disabled], input[type=text][disabled] {
    border: 2px solid #999;
    color: #999;
    cursor: default;
    background: #ccc;
}
</style>
<body>

<div id="container">
    
<h1>بازی حدس عدد</h1>

    <div id="message_txt"></div>
    <form id="userInput" name="userInput" method="post">
        <input id="input_txt" name="limitedtextfield" type="text" onKeyDown="guessNumber(true,this);" onKeyUp="limitText(this.form.limitedtextfield,3);" maxlength="3">
        <br />
        <button id="guess_btn" type="button" onclick="guessNumber(false,this)">?</button>
      
        <button id="playAgain_btn" type="button" onclick="initGame()">&#x21BB;</button>
    </form>
</div>

    <script type="text/javascript">

var randomNumber;
var guess;

function initGame() {
    input_txt.value = "";

    document.getElementById("input_txt").focus();

    document.getElementById("input_txt").disabled = false;
    document.getElementById("guess_btn").disabled = false;
    document.getElementById("playAgain_btn").disabled = true;

    document.getElementById("message_txt").innerHTML = "یک عدد حدسی بین صفر تا ۱۰۰ وارد کنید ";

    randomNumber = Math.ceil(Math.random() * 100);

    var input = document.getElementById("input_txt");

    input.onkeypress = function (e) {
        e = e || window.event;
        if (!e.ctrlKey && !e.metaKey && !e.altKey) {
            var charCode = (typeof e.which === "undefined") ? e.keyCode : e.which;
            if (charCode && !/\d/.test(String.fromCharCode(charCode))) {
                return false;
            }
        }
    }

}

function limitText(limitField, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    }
}

function guessNumber(e,el) {
    var enter = false;
    console.log(event.which)
    if(e){
        if (event.which === 13 ) {
           enter = true;
        }
    } else{
        enter = true;
    }

    if(enter){
guess = document.getElementById("input_txt").value;

        document.getElementById("input_txt").focus();

        if (guess === "") {
            document.getElementById("message_txt").innerHTML = "درست وارد نکردی. دوباره بزن !";
        } else if (guess > randomNumber) {
            document.getElementById("message_txt").innerHTML = guess + " بزرگه رفیق. بیا پایین !!";
            input_txt.value = "";
        } else if (guess < randomNumber) {
            document.getElementById("message_txt").innerHTML = guess + " کوچیکه رفیق. برو بالا !"
            input_txt.value = "";
        } else {
            document.getElementById("message_txt").innerHTML = "دم شما گرم! عدد " + guess + " بود.";
            input_txt.value = "";

            endGame();
        }
    }
}

function endGame() {
    document.getElementById("input_txt").disabled = true;
    document.getElementById("guess_btn").disabled = true;
    document.getElementById("playAgain_btn").disabled = false;
}

function playAgain() {
    initGame();
}

window.onload = initGame;

</script>


</body>
</html>